"use strict";(self.webpackChunklibrephotos_docs=self.webpackChunklibrephotos_docs||[]).push([[2385],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>p});var a=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,r=function(e,t){if(null==e)return{};var o,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var o=e.components,r=e.mdxType,n=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(o),m=r,p=d["".concat(l,".").concat(m)]||d[m]||h[m]||n;return o?a.createElement(p,i(i({ref:t},c),{},{components:o})):a.createElement(p,i({ref:t},c))}));function p(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=o.length,i=new Array(n);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var u=2;u<n;u++)i[u]=o[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}m.displayName="MDXCreateElement"},8673:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>u});var a=o(7462),r=(o(7294),o(3905));const n={title:"\ud83d\udcbc Job System",excerpt:"A overview of what the worker logs mean",sidebar_position:5},i=void 0,s={unversionedId:"user-guide/job-system",id:"user-guide/job-system",title:"\ud83d\udcbc Job System",description:"How does it work",source:"@site/docs/user-guide/job-system.md",sourceDirName:"user-guide",slug:"/user-guide/job-system",permalink:"/docs/user-guide/job-system",draft:!1,editUrl:"https://github.com/LibrePhotos/librephotos.docs/tree/master/docs/user-guide/job-system.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"\ud83d\udcbc Job System",excerpt:"A overview of what the worker logs mean",sidebar_position:5},sidebar:"userguide",previous:{title:"\ud83d\udcc5 Using date rules",permalink:"/docs/user-guide/settings/date-rules"},next:{title:"\ud83d\udcf1  Mobile Apps",permalink:"/docs/user-guide/mobile/"}},l={},u=[{value:"How does it work",id:"how-does-it-work",level:2},{value:"Scan Photos",id:"scan-photos",level:3},{value:"Generate Auto Albums",id:"generate-auto-albums",level:3},{value:"Generate Auto Albums Titles",id:"generate-auto-albums-titles",level:3},{value:"Train Faces",id:"train-faces",level:3},{value:"Delete Missing Photos",id:"delete-missing-photos",level:3},{value:"Calculate Clip Embedding",id:"calculate-clip-embedding",level:3},{value:"Scan Faces",id:"scan-faces",level:3},{value:"Cluster All Faces",id:"cluster-all-faces",level:3},{value:"Where to manage the jobs",id:"where-to-manage-the-jobs",level:2},{value:"What to do when a job gets stuck",id:"what-to-do-when-a-job-gets-stuck",level:2},{value:"Current Limitations",id:"current-limitations",level:2}],c={toc:u},d="wrapper";function h(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"how-does-it-work"},"How does it work"),(0,r.kt)("p",null,"The job system manages all long-running jobs. It gives information, which job is running, which job is in the queue, how far it progressed and when it started and stopped. At the moment, there are eight long-running jobs:"),(0,r.kt)("h3",{id:"scan-photos"},"Scan Photos"),(0,r.kt)("p",null,"Scan photos will look at all media files in your scan directory and will add them to the library."),(0,r.kt)("h3",{id:"generate-auto-albums"},"Generate Auto Albums"),(0,r.kt)("p",null,"This job will look at all media files that already exist. It tries to find common events by looking at the timestamp and grouping the images. If the media files are in a 1 day and 12 hour interval, they will appear in the same auto album."),(0,r.kt)("h3",{id:"generate-auto-albums-titles"},"Generate Auto Albums Titles"),(0,r.kt)("p",null,"This will create a title for the auto album based on the information of the media files in the auto album."),(0,r.kt)("h3",{id:"train-faces"},"Train Faces"),(0,r.kt)("p",null,"This will look at all faces and its groups and will give us a certainty value for the image in the group."),(0,r.kt)("h3",{id:"delete-missing-photos"},"Delete Missing Photos"),(0,r.kt)("p",null,"Finds all missing media files and removes them from the database."),(0,r.kt)("h3",{id:"calculate-clip-embedding"},"Calculate Clip Embedding"),(0,r.kt)("p",null,"Calculates the CLIP value for all images. This is used for semantic search and for finding similar images."),(0,r.kt)("h3",{id:"scan-faces"},"Scan Faces"),(0,r.kt)("p",null,"Looks for faces in the images and save them to the database"),(0,r.kt)("h3",{id:"cluster-all-faces"},"Cluster All Faces"),(0,r.kt)("p",null,"Clusters the faces into known and unknown groups."),(0,r.kt)("h2",{id:"where-to-manage-the-jobs"},"Where to manage the jobs"),(0,r.kt)("p",null,"When you are logged in as an admin, click on the profile picture in the top right corner and then navigate to ",(0,r.kt)("inlineCode",{parentName:"p"},"Admin Area"),". You should see the jobs at the bottom of the page in a table called ",(0,r.kt)("inlineCode",{parentName:"p"},"Worker Logs")),(0,r.kt)("h2",{id:"what-to-do-when-a-job-gets-stuck"},"What to do when a job gets stuck"),(0,r.kt)("p",null,"When a job gets stuck, that usually means, that it crashed, and we could not catch the error correctly. You can just remove the entry from the list to start another job."),(0,r.kt)("h2",{id:"current-limitations"},"Current Limitations"),(0,r.kt)("p",null,"Right now, queuing does not work. It forgets all jobs that are queued after a bit of time. Another recurring issue is that when a job crashes, it usually does not represent it correctly in the view."))}h.isMDXComponent=!0}}]);